(function(e){e.popwin=null;var o=400;var r=e.browser.msie;var g=r&&(e.browser.version=="6.0")&&!e.support.style;var i=r&&(parseInt(e.browser.version)<9);var m,q,d,j,p,b,l,a,k,c,f,n;e.popwin={show:function(x){if(e.popwin.visible){e.popwin.close()}var A=c=x||{};var H=A.url||"";var w=A.content||"";var F=A.ajax;var v=A.hideClose||"no";var h=A.hideScroll||"no";var C=A.header||"";var G;if(c.showBefore){c.showBefore()}n=A.mode||"cut";k=A.hideCover||"no";f=A.animate||"no";p=e(w).length>0?e(w):false;m=A.width||(p?p.width():500);q=A.height||(p?p.height():400);if(e("#popwin").length==0){e("body").append('<div id="popwin"><table id="popwin-table" cellspacing="0" cellpadding="0" border="0"><tr><td class="pop-tl"></td><td class="pop-m"></td><td class="pop-tr"></td></tr><tr><td class="pop-m"></td><td><div id="popwin-con-outter"><div id="popwin-con"></div></div></td><td class="pop-m"></td></tr><tr><td class="pop-bl"></td><td class="pop-m"></td><td class="pop-br"></td></tr></table></div>');if(k=="no"){e("body").append('<div id="popwin-bg"></div>')}}d=e("#popwin-bg")||null;j=e("#popwin");l=e("#popwin-con");boxOutter=e("#popwin-con-outter");if(e("#popwin-close").length==0){boxOutter.before('<div id="popwin-close"></div>');e("#popwin-close").click(function(){e.popwin.close()})}if(C!=""){if(e("#popwin-header").length==0){boxOutter.before('<div id="popwin-header"><div id="popwin-header-inner">'+C+"</div></div>")}else{e("#popwin-header-inner").text(C)}if(e("#popwin-mini-rest").length==0){boxOutter.before('<div id="popwin-mini-rest" class="popwin-minimize"></div>')}e("#popwin-mini-rest").unbind("click").click(function(){if(e(this).hasClass("popwin-minimize")){e(this).removeClass("popwin-minimize").addClass("popwin-restore");e("#popwin-con-outter").hide()}else{e(this).removeClass("popwin-restore").addClass("popwin-minimize");e("#popwin-con-outter").show()}});e("#popwin").draggable({handle:"#popwin-header-inner"});q=q-81}else{e("#popwin-header").remove()}G=e("#popwin-close");v=="yes"?G.css("visibility","hidden"):G.css("visibility","visible");if(p){if(n=="normal"){j=p;l=null}else{b=p.contents();b.appendTo(l)}}if(n=="cut"){boxOutter.css({width:m,height:q});l.css({width:m,height:q});if(C){wrap_h=q+55}else{if(q=="auto"){wrap_h=q}else{wrap_h=q+12}}j.css({width:m+12,height:wrap_h})}else{if(C){wrap_h=q+55}else{if(q=="auto"){wrap_h=q}else{wrap_h=q+12}}j.css({width:m+12,height:wrap_h})}if(h=="yes"){e("html,body").css("overflow","hidden")}if(H){l.addClass("popwin-loading").html('<iframe id="popwin-iframe" frameborder="0" width="'+m+'" height="'+q+'" src=""></iframe>');e("#popwin-iframe").attr("src",H).load(function(){l.removeClass("popwin-loading")})}if(F){l.addClass("popwin-loading");l.html("");e.ajax({url:F.url,data:F.data||{},dataType:F.dataType||"text",success:function(u){if(F.success){F.success(u)}else{l.html(u);e.popwin.fixPosition()}l.removeClass("popwin-loading")}})}if(g){a=e("select:visible");a.css("visibility","hidden")}var E=c.quicktype;if(E){var z=false,y=false,t=false;var D=c.quickarg;var B='<div class="popwin-quick-box">';B+='<table border="0" cellpadding="0" cellspacing="0" width="320"><tr><td width="70"><span class="popwin-icon popwin-'+E+'"></span></td>';if(typeof D[0]=="string"){B+='<td valign="middle"><span class="popwin-quick-text">'+D[0]+"</span></td></tr></table>"}B+='<p class="popwin-btn-wrap">';if(/^(error|info|warn|success)$/.test(E)){B+='<a class="popwin-btn" href="javascript:void(0);" id="popwin-ok-btn">'+(D[1]||"\u786E\u5B9A")+"</a>";if(D[2]&&e.isFunction(D[2])){t=true}}if(E=="ask"){B+='<a class="popwin-btn" href="javascript:void(0);" id="popwin-ask-ok">'+(D[2]||"\u786E\u5B9A")+"</a>";B+='<a style="margin-left:10px;" class="popwin-btn" href="javascript:void(0);" onclick="jQuery.popwin.close();">'+(D[3]||"\u53D6\u6D88")+"</a>";if(e.isFunction(D[1])){y=true}else{if(typeof D[1]=="string"){z=true}}}B+="</p></div>";l.html(B);e("#popwin-ok-btn").click(function(){e.popwin.close();if(t){D[2]()}});if(z){e("#popwin-ask-ok").click(function(u){u.stopPropagation();e.popwin.close();location.href=D[1];return false})}if(y){e("#popwin-ask-ok").click(function(u){e.popwin.close();D[1]();u.stopPropagation();return false})}}q=j.height();e.popwin.setposition();e.popwin.created=true;e.popwin.visible=true},close:function(h){if(k=="no"){if(f=="yes"){i?d.hide():d.fadeOut(o)}else{d.hide()}}if(n=="cut"){l.removeClass("popwin-loading")}if(f=="yes"){i?j.hide():j.animate({top:"-=10",opacity:"hide"},o)}else{j.hide()}if(c.hideScroll=="yes"){e("html,body").css("overflow","")}e.popwin.visible=false;if(g){a.css("visibility","visible")}if(p&&n=="cut"){b.appendTo(p)}if(c.closeAfter){c.closeAfter(h)}l.empty()},setposition:function(){var v=e("body").outerWidth();var y=e(document).height();var h=e(window).width(),x=e(window).height();var t=e(window).scrollTop();var w=(h-m)/2;var u=(x-q)/2;if(g){u+=t}if(k=="no"){d.css({width:v,height:y});if(f=="yes"){i?d.show():d.fadeIn(o)}else{d.show()}}if(e.popwin.visible){j.css({left:w,top:u})}else{j.css({left:w,top:u});if(f=="yes"){i?j.show():j.css({top:u-20}).animate({top:u,opacity:"show"},o)}else{j.show()}}if(c.showAfter){c.showAfter()}},fixPosition:function(){m=j.width();q=j.height();e.popwin.setposition()},created:false,visible:false,quick:function(t,h){e.popwin.show({width:380,height:"auto",hideClose:"yes",quicktype:t,quickarg:h})},error:function(){if(arguments.length>0){e.popwin.quick("error",arguments)}},info:function(){if(arguments.length>0){e.popwin.quick("info",arguments)}},warn:function(){if(arguments.length>0){e.popwin.quick("warn",arguments)}},ask:function(){if(arguments.length>0){e.popwin.quick("ask",arguments)}},success:function(){if(arguments.length>0){e.popwin.quick("success",arguments)}}};e(window).resize(function(){if(e.popwin.created&&e.popwin.visible){e.popwin.setposition()}});if(g){var s;e(window).scroll(function(){if(e.popwin.created&&e.popwin.visible){clearTimeout(s);s=setTimeout(function(){e.popwin.setposition()},200)}})}e(document).keydown(function(h){if(e.popwin.visible&&h.keyCode==27){e.popwin.close()}})})(jQuery);