(function(i){var f=400;var q=i.browser.msie;var g=q&&(i.browser.version=="6.0")&&!i.support.style;var d=q&&(parseInt(i.browser.version)<9);var r,m,j,c,n,p,l,b,e,o,a;i.popwin={show:function(s){if(i.popwin.visible){return}var x=o=s||{};var E=x.url||"";var t=x.content||"";var C=x.ajax;var v=x.hideClose||"no";var h=x.hideScroll||"no";var D;if(o.showBefore){o.showBefore()}e=x.hideCover||"no";a=x.animate||"no";n=i(t).length>0?i(t):false;r=x.width||(n?n.width():500);m=x.height||(n?n.height():400);if(i("#popWin").length==0){i("body").append('<div id="popWin"><table id="popWinTable" cellspacing="0" cellpadding="0" border="0"><tr><td class="popWinTL"></td><td class="popWinM"></td><td class="popWinTR"></td></tr><tr><td class="popWinM"></td><td><div id="popWinConOutter"><div id="popWinCon"></div></div></td><td class="popWinM"></td></tr><tr><td class="popWinBL"></td><td class="popWinM"></td><td class="popWinBR"></td></tr></table></div>');if(e=="no"){i("body").append('<div id="popWinBg"></div>')}}j=i("#popWinBg")||null;c=i("#popWin");l=i("#popWinCon");boxOutter=i("#popWinConOutter");if(i("#popwinClose").length==0){boxOutter.append('<div id="popwinClose"></div>');i("#popwinClose").click(function(){i.popwin.close()})}D=i("#popwinClose");v=="yes"?D.css("visibility","hidden"):D.css("visibility","visible");if(n){p=n.contents();p.appendTo(l)}boxOutter.css({width:r});l.css({width:r});c.css({width:r+12});if(h=="yes"){i("html,body").css("overflow","hidden")}if(E){l.addClass("popWinLoading").html('<iframe id="popWinIframe" frameborder="0" width="'+r+'" height="'+m+'" src=""></iframe>');i("#popWinIframe").attr("src",E)}if(C){l.addClass("popWinLoading");i.ajax({url:C.url,data:C.data||{},dataType:C.dataType||"text",success:function(u){if(C.success){C.success(u)}else{l.html(u)}l.removeClass("popWinLoading")}})}if(g){b=i("select:visible");b.css("visibility","hidden")}var B=o.quicktype;if(B){var A=false,w=false;var z=o.quickarg;var y='<div class="popwin-quick-box">';y+='<table border="0" cellpadding="0" cellspacing="0" width="320"><tr><td width="70"><span class="popwin-icon popwin-'+B+'"></span></td>';if(typeof z[0]=="string"){y+='<td valign="middle"><span class="popwin-quick-text">'+z[0]+"</span></td></tr></table>"}y+='<p class="popwin-btn-wrap">';if(/^(error|info|warn|success)$/.test(B)){y+='<a class="popwin-btn" href="javascript:void(0);" onclick="jQuery.popwin.close();">'+(z[1]||"OK")+"</a>"}if(B=="ask"){y+='<a class="popwin-btn" href="javascript:void(0);" id="popwin-ask-ok">'+(z[2]||"OK")+"</a>";y+='<a style="margin-left:10px;" class="popwin-btn" href="javascript:void(0);" onclick="jQuery.popwin.close();">'+(z[3]||"Cancel")+"</a>";if(i.isFunction(z[1])){w=true}else{if(typeof z[1]=="string"){A=true}}}y+="</p></div>";l.html(y);if(A){i("#popwin-ask-ok").click(function(u){u.stopPropagation();i.popwin.close();location.href=z[1];return false})}if(w){i("#popwin-ask-ok").click(function(u){i.popwin.close();z[1]();u.stopPropagation();return false})}}m=c.height();i.popwin.setposition();i.popwin.created=true;i.popwin.visible=true},close:function(){if(e=="no"){if(a=="yes"){d?j.hide():j.fadeOut(f)}else{j.hide()}}l.removeClass("popWinLoading");if(a=="yes"){d?c.hide():c.animate({top:"-=10",opacity:"hide"},f)}else{c.hide()}if(o.hideScroll=="yes"){i("html,body").css("overflow","")}i.popwin.visible=false;if(g){b.css("visibility","visible")}if(n){p.appendTo(n)}l.empty();if(o.closeAfter){o.closeAfter()}},setposition:function(){var t=i("body").outerWidth();var w=i(document).height();var v=i(window).width(),x=i(window).height();var s=i(window).scrollTop();var h=(v-r)/2;var u=(x-m)/2;if(g){u+=s}if(e=="no"){j.css({width:t,height:w});if(a=="yes"){d?j.show():j.fadeIn(f)}else{j.show()}}if(i.popwin.visible){c.css({left:h,top:u})}else{c.css({left:h,top:u});if(a=="yes"){d?c.show():c.css({top:u-20}).animate({top:u,opacity:"show"},f)}else{c.show()}}if(o.showAfter){o.showAfter()}},created:false,visible:false,quick:function(s,h){i.popwin.show({width:380,hideClose:"yes",quicktype:s,quickarg:h})},error:function(){if(arguments.length>0){i.popwin.quick("error",arguments)}},info:function(){if(arguments.length>0){i.popwin.quick("info",arguments)}},warn:function(){if(arguments.length>0){i.popwin.quick("warn",arguments)}},ask:function(){if(arguments.length>0){i.popwin.quick("ask",arguments)}},success:function(){if(arguments.length>0){i.popwin.quick("success",arguments)}}};i(window).resize(function(){if(i.popwin.created&&i.popwin.visible){i.popwin.setposition()}});if(g){var k;i(window).scroll(function(){if(i.popwin.created&&i.popwin.visible){clearTimeout(k);k=setTimeout(function(){i.popwin.setposition()},200)}})}i(document).keypress(function(h){if(i.popwin.visible&&h.keyCode==27){i.popwin.close()}})})(jQuery);
